<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Quantum Circuit Simulator</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Chart.js added -->
</head>
<body>
<div class="container mt-4">
  <!-- Header -->
  <div class="text-center mb-4">
    <h1 class="display-5 text-dark">Quantum Circuit Simulator</h1>
    <p class="lead text-dark">Drag and drop gates onto the grid. Run the circuit to see probabilities!</p>
  </div>

  <!-- Gate Palette -->
  <div class="card bg-light text-dark mb-4 p-3">
    <div class="d-flex flex-wrap justify-content-center">
      <div class="btn btn-outline-primary m-2 gate-tile" draggable="true" data-gate="H" data-bs-toggle="tooltip" title="Hadamard: Superposition">H</div>
      <div class="btn btn-outline-success m-2 gate-tile" draggable="true" data-gate="X" data-bs-toggle="tooltip" title="X: Bit flip">X</div>
      <div class="btn btn-outline-danger m-2 gate-tile" draggable="true" data-gate="Z" data-bs-toggle="tooltip" title="Z: Phase flip">Z</div>
      <div class="btn btn-outline-warning m-2 gate-tile" draggable="true" data-gate="Y" data-bs-toggle="tooltip" title="Y: Bit+Phase flip">Y</div>
      <div class="btn btn-outline-info m-2 gate-tile" draggable="true" data-gate="S" data-bs-toggle="tooltip" title="S: Phase rotation">S</div>
      <div class="btn btn-outline-secondary m-2 gate-tile" draggable="true" data-gate="T" data-bs-toggle="tooltip" title="T: Phase rotation">T</div>
      <div class="btn btn-outline-dark m-2 gate-tile" draggable="true" data-gate="CNOT" data-bs-toggle="tooltip" title="CNOT: Entanglement">CNOT</div>
    </div>
  </div>

  <!-- Controls -->
  <div class="d-flex justify-content-center mb-3">
    <input type="number" id="numQ" class="form-control me-2" value="2" min="1" max="5" style="width:80px;">
    <button class="btn btn-success me-2" onclick="setupGrid()">Set Qubits</button>
    <button class="btn btn-primary" onclick="simulate()">Run Circuit</button>
  </div>

  <!-- Circuit Grid -->
  <div id="circuit-container" class="overflow-auto p-2 mb-4">
    <div id="grid" class="d-inline-block bg-light p-3 rounded"></div>
  </div>

  <!-- Output / Probability Bars as Chart -->
  <div class="card bg-light text-dark p-3 mb-4">
    <h4 class="text-center">Qubit Probabilities</h4>
    <canvas id="probChart" height="150"></canvas>
  </div>

  <!-- Legend / Info -->
  <div class="card bg-light text-dark p-3 mb-4">
    <h4>Gate & Concept Info</h4>
    <ul class="list-group list-group-flush text-dark">
      <li class="list-group-item">H: Hadamard - puts the qubit into a balanced superposition of 0 and 1 — like a coin spinning endlessly.</li>
      <li class="list-group-item">X: Quantum NOT gate → flips |0⟩ to |1⟩ and |1⟩ to |0⟩.></li>
      <li class="list-group-item">Z: Phase flip — invisible twist that affects interference.</li>
      <li class="list-group-item">Y: Flip + twist — combines X and Z effects.</li>
      <li class="list-group-item">S/T: S Gate is Quarter-phase rotation. T Gate is Small phase rotation (1/8 turn).</li>
      <li class="list-group-item">CNOT: Entanglement (Control Flips the Target)</li>
      <li class="list-group-item">Measurement collapses qubits to classical bits (Run Circuit)</li>
    </ul>
  </div>
</div>

<script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
